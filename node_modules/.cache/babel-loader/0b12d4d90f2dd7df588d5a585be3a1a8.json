{"ast":null,"code":"var _jsxFileName = \"/home/luong/kobuki_web/src/components/Camera/Camera.js\";\nimport React, { Component } from \"react\";\nimport { Container, Card, Col, Row } from \"react-bootstrap\";\nimport ROSLIB from \"roslib\";\nimport \"../CommonStyle.css\";\nimport \"./Camera.css\";\n\nvar tempImage = require('./not-available.png');\n\nclass Camera extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      enableCamera: false\n    };\n    this.ros = props.ros || null;\n    this.subCamera = null;\n    this.subcribeCameraTopic = this.subcribeCameraTopic.bind(this);\n    this.unsubscribeCameraTopic = this.unsubscribeCameraTopic.bind(this);\n  }\n\n  subcribeCameraTopic() {\n    let id = \"camera_0\" + this.props.number + \"_id\";\n    this.subCamera.subscribe(function (message) {\n      document.getElementById(id).src = \"data:image/jpg;base64,\" + message.data;\n    });\n  }\n\n  unsubscribeCameraTopic() {\n    let id = \"camera_0\" + this.props.number + \"_id\";\n\n    if (this.subCamera) {\n      this.subCamera.unsubscribe();\n      document.getElementById(id).src = tempImage;\n    }\n  }\n\n  componentDidUpdate() {\n    if (this.ros == null) {\n      this.ros = this.props.ros;\n      this.subCamera = new ROSLIB.Topic({\n        ros: this.ros,\n        name: '/camera_0' + this.props.number + '/rgb/image_raw/compressed',\n        messageType: 'sensor_msgs/CompressedImage'\n      });\n    }\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(Container, {\n      className: \"box-margin\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(Card, {\n      border: \"secondary\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Card.Header, {\n      style: {\n        fontSize: \"1.2rem\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"strong\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 54\n      }\n    }, \"Camera \", this.props.number)), /*#__PURE__*/React.createElement(Card.Body, {\n      style: {\n        padding: \"1rem 0rem 0rem 0rem\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Row, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Col, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 15\n      }\n    }, \"Enable Camera\"), /*#__PURE__*/React.createElement(Col, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      className: \"switch\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      onChange: event => {\n        this.setState({\n          enableCamera: event.target.checked\n        });\n        if (this.state.enableCamera) this.unsubscribeCameraTopic();else this.subcribeCameraTopic();\n      },\n      checked: this.state.enableCamera,\n      type: \"checkbox\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 19\n      }\n    }), /*#__PURE__*/React.createElement(\"span\", {\n      className: \"slider round\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 19\n      }\n    })))), /*#__PURE__*/React.createElement(Container, {\n      className: \"camera-container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      id: \"camera_0\" + this.props.number + \"_id\",\n      width: 320,\n      src: tempImage,\n      alt: \"new\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 15\n      }\n    })))));\n  }\n\n}\n\nexport default Camera;","map":{"version":3,"sources":["/home/luong/kobuki_web/src/components/Camera/Camera.js"],"names":["React","Component","Container","Card","Col","Row","ROSLIB","tempImage","require","Camera","constructor","props","state","enableCamera","ros","subCamera","subcribeCameraTopic","bind","unsubscribeCameraTopic","id","number","subscribe","message","document","getElementById","src","data","unsubscribe","componentDidUpdate","Topic","name","messageType","render","fontSize","padding","event","setState","target","checked"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAASC,SAAT,EAAoBC,IAApB,EAA0BC,GAA1B,EAA+BC,GAA/B,QAA0C,iBAA1C;AACA,OAAOC,MAAP,MAAmB,QAAnB;AACA,OAAO,oBAAP;AACA,OAAO,cAAP;;AAEA,IAAIC,SAAS,GAAGC,OAAO,CAAC,qBAAD,CAAvB;;AAEA,MAAMC,MAAN,SAAqBR,SAArB,CAA+B;AAC7BS,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACjB,UAAMA,KAAN;AACA,SAAKC,KAAL,GAAa;AACXC,MAAAA,YAAY,EAAE;AADH,KAAb;AAGA,SAAKC,GAAL,GAAWH,KAAK,CAACG,GAAN,IAAa,IAAxB;AACA,SAAKC,SAAL,GAAiB,IAAjB;AACA,SAAKC,mBAAL,GAA2B,KAAKA,mBAAL,CAAyBC,IAAzB,CAA8B,IAA9B,CAA3B;AACA,SAAKC,sBAAL,GAA8B,KAAKA,sBAAL,CAA4BD,IAA5B,CAAiC,IAAjC,CAA9B;AACD;;AAEDD,EAAAA,mBAAmB,GAAG;AACpB,QAAIG,EAAE,GAAG,aAAa,KAAKR,KAAL,CAAWS,MAAxB,GAAiC,KAA1C;AACA,SAAKL,SAAL,CAAeM,SAAf,CAAyB,UAASC,OAAT,EAAkB;AACzCC,MAAAA,QAAQ,CAACC,cAAT,CAAwBL,EAAxB,EAA4BM,GAA5B,GAAkC,2BAA2BH,OAAO,CAACI,IAArE;AACD,KAFD;AAGD;;AACDR,EAAAA,sBAAsB,GAAG;AACvB,QAAIC,EAAE,GAAG,aAAa,KAAKR,KAAL,CAAWS,MAAxB,GAAiC,KAA1C;;AACA,QAAI,KAAKL,SAAT,EAAoB;AAClB,WAAKA,SAAL,CAAeY,WAAf;AACAJ,MAAAA,QAAQ,CAACC,cAAT,CAAwBL,EAAxB,EAA4BM,GAA5B,GAAkClB,SAAlC;AACD;AACF;;AAEDqB,EAAAA,kBAAkB,GAAG;AACnB,QAAI,KAAKd,GAAL,IAAY,IAAhB,EAAsB;AACpB,WAAKA,GAAL,GAAW,KAAKH,KAAL,CAAWG,GAAtB;AACA,WAAKC,SAAL,GAAiB,IAAIT,MAAM,CAACuB,KAAX,CAAiB;AAChCf,QAAAA,GAAG,EAAE,KAAKA,GADsB;AAEhCgB,QAAAA,IAAI,EAAE,cAAc,KAAKnB,KAAL,CAAWS,MAAzB,GAAkC,2BAFR;AAGhCW,QAAAA,WAAW,EAAE;AAHmB,OAAjB,CAAjB;AAKD;AACF;;AAEDC,EAAAA,MAAM,GAAG;AACP,wBACE,oBAAC,SAAD;AAAW,MAAA,SAAS,EAAC,YAArB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE,oBAAC,IAAD;AAAM,MAAA,MAAM,EAAC,WAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE,oBAAC,IAAD,CAAM,MAAN;AAAa,MAAA,KAAK,EAAE;AAACC,QAAAA,QAAQ,EAAE;AAAX,OAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAA2C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAAgB,KAAKtB,KAAL,CAAWS,MAA3B,CAA3C,CADF,eAEE,oBAAC,IAAD,CAAM,IAAN;AAAW,MAAA,KAAK,EAAE;AAACc,QAAAA,OAAO,EAAE;AAAV,OAAlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE,oBAAC,GAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE,oBAAC,GAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBADF,eAEE,oBAAC,GAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAO,MAAA,SAAS,EAAC,QAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAO,MAAA,QAAQ,EAAGC,KAAD,IAAW;AAC1B,aAAKC,QAAL,CAAc;AAACvB,UAAAA,YAAY,EAAEsB,KAAK,CAACE,MAAN,CAAaC;AAA5B,SAAd;AACA,YAAI,KAAK1B,KAAL,CAAWC,YAAf,EAA6B,KAAKK,sBAAL,GAA7B,KAAiE,KAAKF,mBAAL;AAClE,OAHD;AAKA,MAAA,OAAO,EAAE,KAAKJ,KAAL,CAAWC,YALpB;AAKkC,MAAA,IAAI,EAAC,UALvC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,eAQE;AAAM,MAAA,SAAS,EAAC,cAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MARF,CADF,CAFF,CADF,eAgBE,oBAAC,SAAD;AAAW,MAAA,SAAS,EAAC,kBAArB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAK,MAAA,EAAE,EAAE,aAAa,KAAKF,KAAL,CAAWS,MAAxB,GAAiC,KAA1C;AAAiD,MAAA,KAAK,EAAE,GAAxD;AAA6D,MAAA,GAAG,EAAEb,SAAlE;AAA6E,MAAA,GAAG,EAAC,KAAjF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,CAhBF,CAFF,CADF,CADF;AA2BD;;AAjE4B;;AAoE/B,eAAeE,MAAf","sourcesContent":["import React, { Component } from \"react\";\nimport { Container, Card, Col, Row } from \"react-bootstrap\";\nimport ROSLIB from \"roslib\";\nimport \"../CommonStyle.css\";\nimport \"./Camera.css\";\n\nvar tempImage = require('./not-available.png');\n\nclass Camera extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      enableCamera: false,\n    };\n    this.ros = props.ros || null;\n    this.subCamera = null;\n    this.subcribeCameraTopic = this.subcribeCameraTopic.bind(this);\n    this.unsubscribeCameraTopic = this.unsubscribeCameraTopic.bind(this);\n  }\n\n  subcribeCameraTopic() {\n    let id = \"camera_0\" + this.props.number + \"_id\";\n    this.subCamera.subscribe(function(message) {\n      document.getElementById(id).src = \"data:image/jpg;base64,\" + message.data;\n    });\n  }\n  unsubscribeCameraTopic() {\n    let id = \"camera_0\" + this.props.number + \"_id\";\n    if (this.subCamera) {\n      this.subCamera.unsubscribe();\n      document.getElementById(id).src = tempImage;\n    }\n  }\n\n  componentDidUpdate() {\n    if (this.ros == null) {\n      this.ros = this.props.ros;\n      this.subCamera = new ROSLIB.Topic({\n        ros: this.ros,\n        name: '/camera_0' + this.props.number + '/rgb/image_raw/compressed',\n        messageType: 'sensor_msgs/CompressedImage'\n      });\n    }\n  }\n\n  render() {\n    return (\n      <Container className=\"box-margin\">\n        <Card border=\"secondary\">\n          <Card.Header style={{fontSize: \"1.2rem\" }}><strong>Camera {this.props.number}</strong></Card.Header>\n          <Card.Body style={{padding: \"1rem 0rem 0rem 0rem\"}}>\n            <Row>\n              <Col>Enable Camera</Col>\n              <Col>\n                <label className=\"switch\">\n                  <input onChange={(event) => {\n                    this.setState({enableCamera: event.target.checked});\n                    if (this.state.enableCamera) this.unsubscribeCameraTopic(); else this.subcribeCameraTopic();\n                  }\n                  }\n                  checked={this.state.enableCamera} type=\"checkbox\"\n                />\n                  <span className=\"slider round\"></span>\n                </label>\n              </Col>\n            </Row>\n            <Container className=\"camera-container\">\n              <img id={\"camera_0\" + this.props.number + \"_id\"} width={320} src={tempImage} alt=\"new\"></img>\n            </Container>\n          </Card.Body>\n        </Card>\n      </Container>\n    )\n  }\n}\n\nexport default Camera;"]},"metadata":{},"sourceType":"module"}